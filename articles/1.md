% Prepare AVR-GCC to work with new ATtiny 0/1/2 series
% 21-09-2024
% You want to try out new ATtiny 0/1 or 2 series, but avr/io.h header tells you that "device type [is] not defined"?

# But why?

Running following command:

```bash
avr-gcc -mmcu=attiny424 main.c
avr/io.h:581:6: warning: #warning "device type not defined"
```

will produce error `"device type [is] not defined"`.

Unfortunatelly, `avr-gcc` does not comes with headers required to compile our **C** code for new ATtiny 0/1/2 series. Therefore some hacking is needed.

This article will provide simple snipets to quickly get working, modified version of `avr-gcc`.

# Downloads

Download latest 8-bit compiler from [Microchip](https://www.microchip.com/en-us/tools-resources/develop/microchip-studio/gcc-compilers).
Grab `Microchip ATtiny Series Device Support` [pack](https://packs.download.microchip.com). This `.atpack` file contains all headers and files that `avr-gcc` needs to successfully compile code.

# Steps

1. Unpack `avr-gcc` and `.atpack` archives.
2. Copy neccesary files from `.atpack` to `avr-gcc` directory:

```bash
cp {atpack-directory}/include/avr/iotn* {avr-gcc-directory}/avr/include/avr/
```

```bash
cp {atpack-directory}/gcc/dev/attiny*/avrxmega3/*.{a,o} {avr-gcc-directory}/avr/lib/avrxmega3/
```

```bash
cp {atpack-directory}/gcc/dev/attiny*/device-specs/* {avr-gcc-directory}/lib/gcc/avr/7.3.0/device-specs
```

```bash
cp {atpack-directory}/gcc/dev/attiny*/device-specs/* {avr-gcc-directory}/lib/gcc/avr/7.3.0/device-specs
```

3. Modify `avr/io.h` ...to be continued.
